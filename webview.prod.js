!function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function n(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function o(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function r(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))}function a(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}function s(e,t){for(var n=0,o=t.length,r=e.length;n<o;n++,r++)e[r]=t[n];return e}var c=function(e){return null!==e&&"object"==typeof e},u="undefined"!=typeof console,l=new Proxy({},{apply:function(){}});function p(e,t){return("0".repeat(t)+e).slice(-t)}var v,f=function(e,t,n){var o=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.withTimeGetter&&e.unshift(this._prefix()),this.labelGetter&&e.unshift(this.labelGetter),o.apply(this,e)},n},d=function(){function e(e){var t=void 0===e?{}:e,n=t.label,o=void 0===n?"":n,r=t.withTime;this.withTime=!1,this.logger=console,this.label="",this.withTime=!!r,this.label=o}return Object.defineProperty(e.prototype,"withTimeGetter",{get:function(){return this.withTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelGetter",{get:function(){return this.label},enumerable:!1,configurable:!0}),e.prototype._prefix=function(){return e=new Date,t=p(String(e.getHours()),2),n=p(String(e.getMinutes()),2),o=p(String(e.getSeconds()),2),r=p(String(e.getMilliseconds()),3),"[".concat(t,":").concat(n,":").concat(o,":").concat(r,"] ");var e,t,n,o,r},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.logger).debug.apply(e,s([],i(t)))},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.logger).info.apply(e,s([],i(t)))},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.logger).warn.apply(e,s([],i(t)))},e.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.logger).error.apply(e,s([],i(t)))},e.prototype.setLogger=function(e){this.logger=e},n([f,o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"debug",null),n([f,o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"info",null),n([f,o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"warn",null),n([f,o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"error",null),e}(),g=u?new d({label:"[system]",withTime:!0}):l;function m(){var e=Object.create(null);return{on:function(t,n){(e[t]||(e[t]=[])).push(n)},once:function(e,t){var n=this,o=function(){n.off(e,o),t()};this.on(e,o)},off:function(t,n){if(e[t])if(n){var o=e[t].indexOf(n);o>=0&&e[t].splice(o,1)}else e[t].length=0},emit:function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(e[t]||[]).slice().forEach((function(e){e.apply(void 0,s([],i(n)))}))}}}u&&new d;var h=function(){return v||(v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})};!function(){function e(e){this._map=new Map,this._name="",this._name=e}Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!1,configurable:!0}),e.prototype.whenReady=function(e){return r(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return(t=this._get(e)).resolved?[3,2]:[4,t.promise];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e.prototype.ready=function(e){var t=this._get(e);t.resolved||t.resolve()},e.prototype.reject=function(e,t){var n=this._get(e);n.resolved||n.reject(t)},e.prototype.delete=function(e){var t=this._map.get(e);t&&!t.resolved&&t.reject("The defer(id=".concat(e,") in DeferManager(").concat(this._name,") is rejected, because it has been deleted.")),this._map.delete(e)},e.prototype._get=function(e){var t=this._map.get(e);return t||(t=function(){var e={resolve:null,reject:null,resolved:!1};return e.promise=new Promise((function(t,n){e.resolve=function(n){e.resolved=!0,t(n)},e.reject=function(t){e.resolved=!0,n(t)}})),e}(),this._map.set(e,t)),t}}();var y=function(){},w=function(e){return"function"==typeof e};"undefined"!=typeof WorkerGlobalScope&&(self,WorkerGlobalScope);var b,I=function(t){function n(e,n){var o=this.constructor,r=t.call(this,e)||this;return r.code=n,Object.setPrototypeOf(r,o.prototype),r}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}(n,t),n.prototype.toString=function(){return"Error(message:".concat(this.message,", code:").concat(this.code,")")},n}(Error),_="$callback",U=function(){var e=this,n=0,o=m(),i=null,s=new Map,u=new Map;return{registerEvent:function(e,t){return o.on(e,t),function(){o.off(e,t)}},registerCmd:function(e,t){s.set(e,t)},getFallbackCmdHandler:function(){return i},setFallbackCmdHandler:function(e){i=e},createEventMessage:function(e,t){return void 0===t&&(t={}),{type:e,payload:t}},createActionMessage:function(e,t,o){var r,a={action:e,payload:{}};if(c(t)?(a.payload=t,r=o):w(t)?r=t:w(o)&&(r=o),r){var i=n++;u.set(i,r),a.callbackId=i}return a},handleMessage:function(n,l,p){return r(e,void 0,void 0,(function(){var e,r,v,f,d,g,m,h,y,b,U,C,S,k;return a(this,(function(a){switch(a.label){case 0:if(n.type)return o.emit((e=n).type,e.payload,p,{time:e.time}),[2];if(d=void 0===(f=(r=n).payload)?{}:f,g=r.callbackId,m=r.error,h=r.code,(v=r.action)===_&&void 0!==g)return(y=u.get(g))&&y(m?new I(m,h||"-1"):null,d),[2];S=s.get(v);try{C=S?S.call(null,d,p):function(e,t,n){if(!i)throw new I("Unknown Action ".concat(e),"-1");return i(e,t,n)}(v,d,p)}catch(e){U=e.code,b=e.message||String(e)}if(null==g)return[3,5];if(!(c(N=C)&&w(N.then)&&w(N.catch)))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,C];case 2:return C=a.sent(),[3,4];case 3:return k=a.sent(),U=k.code,b=k.message||String(k),[3,4];case 4:void 0!==C||(C={}),l(t(t({action:_,payload:C,callbackId:g},b&&{error:b,code:U}),!1)),a.label=5;case 5:return[2]}var N}))}))}}};function C(e){return JSON.stringify(e)}function S(e){return JSON.stringify(e)}"undefined"==typeof __NEZHA_BRIDGE__?(g.warn('"__NEZHA_BRIDGE__" not Found'),b={postAction:y,postMessage:y,postWebViewMessage:y}):b=__NEZHA_BRIDGE__;var k={onmessage:y,postMessage:function(e){b.postMessage(e.message)}},N={onMessage:function(e){g.info("on message",e),k.onmessage({message:e})}};h().__NEZHA_WEB_BRIDGE__=N;var R,P,M,E,O,x,j=function(e,n){var o=this,i={},s=i.waitForReady,c=i.getDefaultTargetId;void 0!==s&&s&&(n=function(e){var t=[],n=!1,o=function(t){e.postMessage(t)},r=function(e){n?(o(e),r=o):t.push(e)};return{ready:function(){n=!0,function(){var e=t.slice();t.length=0;for(var n=0;n<e.length;n++)o(e[n])}()},postMessage:r,get onmessage(){return e.onmessage},set onmessage(t){e.onmessage=t}}}(n));var u=U(),l="rpcAppSend",p="rpcAppReceive",v=m(),f=function(e,t){v.emit(l,{msg:t}),n.postMessage(e)};return n.onmessage=function(e){return r(o,void 0,void 0,(function(){var n,o;return a(this,(function(r){return n=e.srcId,o=function(e){return JSON.parse(e)}(e.message),v.emit(p,{msg:o,srcId:n}),u.handleMessage(o,(function(e){var o=e.type?S(e):C(e);void 0===n?f({message:o},e):f({message:o,targetIds:[n]},t(t({},e),{targetIds:[n]}))}),{rendererId:n}),[2]}))}))},{onMessageSend:function(e){v.on(l,e)},onMessageReceived:function(e){v.on(p,e)},ready:function(){n.ready&&n.ready()},send:function(e,n){var o=u.createEventMessage(e,n),r=S(o),a=c&&c();void 0!==a?f({message:r,targetIds:[a]},t(t({},o),{targetIds:[a]})):f({message:r},o)},sendTo:function(e,n,o){var r=u.createEventMessage(n,o),a=S(r);f({message:a,targetIds:e},t(t({},r),{targetIds:e}))},on:function(e,t){return u.registerEvent(e,t)},invoke:function(e,n){return void 0===n&&(n={}),new Promise((function(o,r){var a=u.createActionMessage(e,n,(function(e,t){e?r(e):o(t)})),i=C(t(t({},a),{action:e,payload:n})),s=c&&c();void 0!==s?f({message:i,targetIds:[s]},t(t({},a),{targetIds:[s]})):f({message:i},a)}))},invokeSync:function(e,n){var o,r;void 0===n&&(n={});var a=u.createActionMessage(e,n,(function(e,t){e?o=e:r=t})),i=C(t(t({},a),{action:e,payload:n})),s=c&&c();if(void 0!==s?f({message:i,targetIds:[s]},t(t({},a),{targetIds:[s]})):f({message:i},a),o)throw o;return r},invokeOn:function(e,n,o,r){return void 0===o&&(o={}),new Promise((function(a,i){var s=u.createActionMessage(n,o,(function(e,t){e?i(e):a(t)})),c=C(t(t({},s),{action:n,payload:o}));if(f({message:c,targetIds:e},t(t({},s),{targetIds:e})),r)try{r(c)}catch(e){g.error("[RPC_CALLBACK_ERROR]: ".concat(e))}}))},invokeSyncOn:function(e,n,o){var r,a;void 0===o&&(o={});var i=!1,s=u.createActionMessage(n,o,(function(e,t){i=!0,e?r=e:a=t})),c=C(t(t({},s),{action:n,payload:o}));if(f({message:c,targetIds:e},t(t({},s),{targetIds:e})),r)throw r;if(!i)throw"RPC: No Response";return a},handle:function(e,t){u.registerCmd(e,t)},handleUnknown:function(e){u.setFallbackCmdHandler(e)}}}(0,k);!function(e){e.False="200003903",e.None="200003904",e.Review="200003905",e.Refuse="200003906"}(R||(R={})),function(e){e.$Ready="$ready",e.$RendererReady="$renderer-ready",e.$RendererReadyNative="$renderer-ready",e.PageReady="page-ready",e.UIRenderInit="ui_render_init",e.UIComponentInit="ui_comp_init",e.UIComponentSetData="ui_comp_set_data",e.UIComponentInvokeLifecycleHook="ui_comp_invoke_lefecycle",e.UIComponentInvokeMethod="ui_comp_invoke_method",e.UIComponentInvokeEvent="ui_comp_invoke_event",e.UIComponentControlValueCursor="ui_comp_control_value_cursor",e.UIShouldShowConsole="ui_should_show_console",e.UINavigationPush="ui-navigation-push",e.UINavigationToMP="ui-navigation-to-mp",e.UINavigationToDeeplink="ui-navigation-to-deeplink",e.UINavigationToExternal="ui-navigation-to-external",e.UIDownloadImage="ui-download-image",e.UINativeComponentCreate="ui-native-component-create",e.UINativeComponentDestroy="ui-native-component-destroy",e.UINativeComponentUpdate="ui-native-component-update",e.UINativeComponentInvoke="ui-native-component-invoke",e.UINativeUIShow="ui-native-ui-show",e.UINativeUIHide="ui-native-ui-hide",e.UINativeUIUpdate="ui-native-ui-update",e.UISelectQueryEvent="ui-select-query-event",e.UIEmitVideoContextEvent="ui-emit-video-context-event",e.UICanvasOffscreenCreate="ui-canvas-offscreen-create",e.UICanvasContextInit="ui-canvas-context-init",e.UICanvasContextSetter="ui-canvas-context-setter",e.UICanvasImageCreate="ui-canvas-image-create",e.UICanvasImageSetter="ui-canvas-image-setter",e.UICanvasGradientAddColorStop="ui-canvas-gradient-add-color-stop",e.UICanvasPath2DCreate="ui-canvas-path2d-create",e.UICanvasPath2DEvent="ui-canvas-path2d-event",e.UICanvasRender="ui-canvas-render",e.UIWebViewShow="ui-web-view-show",e.UIWebViewUpdate="ui-web-view-update",e.UIWebViewHide="ui-web-view-hide",e.UIPerformanceLog="ui-performance-log",e.UIPerformanceFirstRenderLog="ui-performance-first-render-log",e.UIPerformanceObserver="ui-performance-observer",e.UIPrivatePerformanceTest="ui-private-performance-test",e.UIRemoveSkeleton="ui-remove-skeleton",e.UIFPSListenStart="ui-fps-listen-start",e.UIFPSData="ui-fps-data",e.UIFPSListenEnd="ui-fps-listen-end",e.UIStartAnimation="ui-start-animation",e.UIClearAnimation="ui-clear-animation",e.UIShareAppMessage="ui-share-app-message",e.UIOpenSetting="ui-open-setting",e.UIGetUserProfile="ui-get-user-profile",e.UIGetPhoneNumber="ui-get-phone-number",e.UIGetEmailAddress="ui-get-email-address",e.WebViewPostMessage="web-view-post-message",e.GetUserInfo="get-userInfo",e.PageScrollTo="page-scroll-to",e.NavigationPush="navigation-push",e.NavigationPop="navigation-pop",e.NavigationRedirect="navigation-redirect",e.NavigationRelaunch="navigation-relaunch",e.NavigationSwitchTab="navigation-switchtab",e.NavigationToDeeplink="navigation-to-deeplink",e.NavigationToExternal="navigation-to-external",e.DownloadFile="framework-download-file",e.ScrollViewUpdate="scroll-view-update",e.NativeComponentCreate="native-component-create",e.NativeComponentDestroy="native-component-destroy",e.NativeComponentUpdate="native-component-update",e.NativeComponentInvoke="native-component-invoke",e.NativeUIShow="native-ui-show",e.NativeUIHide="native-ui-hide",e.NativeUIUpdate="native-ui-update",e.WebViewShow="show-webview",e.WebViewUpdate="update-webview",e.WebViewHide="hide-webview",e.MonitorUpload="framework-monitor-upload",e.FrameworkGetStorage="framework-get-storage",e.FrameworkSetStorage="framework-set-storage",e.FrameworkRemoveStorage="framework-remove-storage",e.FrameworkClearStorage="framework-clear-storage",e.ContextGet="context-get-property",e.ContextSet="context-set-property"}(M||(M={})),function(e){e.RouteChange="route-change",e.EventRouteChangeDone="route-change-done",e.TapItemTap="tab-item-tap",e.PageReady="page-ready",e.PullDownRefreshStarted="pull-down-refresh-started",e.NativeComponentEvent="native-component-event",e.NativeUIEvent="native-ui-event",e.WebViewEvent="event-webview",e.EventPageScroll="event-page-scroll",e.EventPageReachBottom="event-page-reach-bottom",e.UINativeComponentEvent="ui-native-component-event",e.UINativeUIEvent="ui-native-ui-event",e.UIWebViewEvent="ui-web-view-event",e.UINativeWebviewMount="ui-native-web-view-mount",e.UINativeWebviewUnmount="ui-native-web-view-unmount",e.ConsoleMessage="console-message",e.UICanvasImageOnload="ui-canvas-image-onload",e.WebViewPostMessage="web-view-post-message"}(E||(E={})),function(e){e.RemoteCallAPI="remote_call_api",e.RemoteCallRemoteFunction="remote_call_remote_function",e.RemoteMemberGet="remote_member_get",e.RemoteMemberSet="remote_member_set",e.RemoteMemberCallMethod="remote_member_call_method",e.RemoteGetWebGLContext="remote_get_webgl_context"}(O||(O={})),function(e){e.CallWorkerFunc="remote_call_worker_func"}(x||(x={})),(P={})[M.UINativeComponentCreate]=M.NativeComponentCreate,P[M.UINativeComponentDestroy]=M.NativeComponentDestroy,P[M.UINativeComponentUpdate]=M.NativeComponentUpdate,P[M.UINativeComponentInvoke]=M.NativeComponentInvoke,j.handle(M.WebViewPostMessage,(function(e){var t=h().bn;"function"==typeof t.onMessage?t.onMessage(e):g.warn("[webview] receive message with out handler",e)}));var T=Object.freeze({__proto__:null,postMessage:function(e){j.send(E.WebViewPostMessage,{data:e})}});h().bn={miniProgram:T}}();
